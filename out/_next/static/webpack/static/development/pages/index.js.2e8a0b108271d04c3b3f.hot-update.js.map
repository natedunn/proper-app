{"version":3,"file":"static/webpack/static/development/pages/index.js.2e8a0b108271d04c3b3f.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["// Deps\nimport React, { Component } from 'react';\nimport tw from 'tailwind.macro';\n// Components\nimport Head from 'component/head';\nimport Nav from 'component/nav';\nimport Search from 'component/search';\nimport Queue from 'component/queue';\nimport Footer from 'component/footer';\nimport Container from 'layout/container';\nimport { H1 } from 'component/heading';\n// Imported\nimport { getData } from '../utils/fetch';\nimport { generateZip } from '../utils/helper';\n\nconst pageInfo = {\n  title: 'Proper | Build',\n};\n\nexport default class Home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      term: '',\n      origin: {\n        id: 'NPM',\n        name: 'NPM',\n      },\n      queue: [],\n      results: [],\n      loading: false,\n    };\n    this.deleteItem = this.deleteItem.bind(this);\n  }\n\n  componentDidMount () {\n    const data = localStorage.getItem('_queue');\n    if (data) {\n      this.setState({\n        queue: JSON.parse(data),\n      });\n    }\n  }\n\n  componentDidUpdate () {\n    const { queue } = this.state;\n    localStorage.setItem('_queue', JSON.stringify(queue));\n  }\n\n  resetResults = () => {\n    this.setState({\n      results: [],\n    });\n  };\n\n  resetTerm = () => {\n    this.setState({\n      term: '',\n    });\n  };\n\n  resetQueue = () => {\n    this.setState({\n      queue: [],\n    });\n  };\n\n  onOriginChange = event => {\n    const { target } = event;\n    const selectedValue = target.value;\n    const selectedText = target.options[target.selectedIndex].text;\n    if (selectedValue) {\n      this.setState({\n        origin: {\n          name: selectedText,\n          id: selectedValue,\n        },\n      });\n    }\n    this.resetResults();\n    this.resetTerm();\n  };\n\n  handleSearchChange = event => {\n    const { origin } = this.state;\n    const { value } = event.target;\n    this.setState({ term: value, loading: true });\n    if (!value.length) {\n      this.resetResults();\n    } else {\n      this.resetResults();\n      getData(value, origin.id).then(results => {\n        if (results && results.length)\n          this.setState({ results, loading: false });\n      });\n    }\n  };\n\n  addToQueue = item => {\n    const { origin, queue } = this.state;\n    const { name, ver, id } = item;\n    this.setState({\n      queue: [\n        ...queue,\n        {\n          ...queue[name],\n          name,\n          id,\n          origin,\n          ver,\n        },\n      ],\n    });\n    this.setState({\n      term: '',\n      results: [],\n    });\n  };\n\n  deleteItem = key => {\n    const { queue } = this.state;\n    this.setState({\n      queue: queue.filter((_, i) => i !== key),\n    });\n  };\n\n  render () {\n    const { queue } = this.state;\n    return (\n      <>\n        <Head title={pageInfo.title} />\n        <Nav />\n        <Container>\n          <div css={tw`py-12 px-12 bg-purple-700 rounded`}>\n            <H1 css={tw`mb-10 mt-10 font-bold text-white text-5xl`}>\n              Get your machine up <br />& running with Proper\n            </H1>\n            <Search\n              {...this.state}\n              addToQueue={this.addToQueue}\n              handleSearchChange={this.handleSearchChange}\n              handleSearchKeyDown={this.handleSearchKeyDown}\n              onOriginChange={this.onOriginChange}\n              css={tw`border-t border-purple-500 pt-5`}\n            />\n          </div>\n          <Queue\n            items={queue}\n            deleteItem={this.deleteItem}\n            generateZip={generateZip}\n          />\n          <Footer />\n        </Container>\n      </>\n    );\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AADA;AACA;;;;;;;;;;;;;;;;;;;;;;AAGA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AA8BA;AACA;AADA;AAGA;AACA;AAlCA;AAoCA;AACA;AADA;AAGA;AACA;AAxCA;AA0CA;AACA;AADA;AAGA;AACA;AA9CA;AA+CA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AAAA;AACA;AAAA;AACA;AACA;AA9DA;AA+DA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AA7EA;AA8EA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAIA;AACA;AACA;AACA;AAPA;AADA;AACA;AAWA;AACA;AACA;AAFA;AAIA;AACA;AAlGA;AAmGA;AACA;AACA;AACA;AAAA;AAAA;AADA;AAGA;AACA;AAvGA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AARA;AAUA;AAZA;AAaA;AACA;;;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;;;AAEA;AAAA;AAEA;AACA;;;AA+EA;AAAA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AArIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAtIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AALA;AAMA;AAAA;AA/IA;AAAA;AAAA;AAAA;AAAA;AAAA;AA+IA;AAAA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;AAxIA;AACA;;;;;A","sourceRoot":""}